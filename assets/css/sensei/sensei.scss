@import '../scss/global/variables';
@import '../scss/global/mixins';
@import '../scss/global/placeholders';
@import '../vendor/bootstrap/alerts';

// Placeholders and Mixins

%button {
	background-color: #418ad0;
	box-shadow: 2px 2px 0 0 #27639e;
	color: #fff;
	border: 0 none;
	border-radius: 3px;
	padding: 12px 20px;
	font-size: 14px;
	letter-spacing: 0.6px;
	line-height: 1.25;
	text-transform: uppercase;
}
%button-hover {
	background-color: #367dc0;
}

%bootstrap-form-control {
	display: block;
	width: 100%;
	height: 50px;
	padding: 6px 12px;
	font-size: 15px !important;
	line-height: 1.6;
	color: $text-color;
	background-color: white;
	background-image: none;
	border: 1px solid #DDD;
	border-radius: 2px;
	// box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
	// transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;

	// lsx-form-control

	border-width: 2px;
	box-shadow: none;
	font-size: 18px;
	line-height: 1.33;
	padding: 10px 20px;
	transition: all 150ms ease;

	&:focus {
		border-color: #418AD0;
		// outline: 0;
		// box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(65, 138, 208, 0.6);
	}
}

%small-form-field {
	height: 42px;
	padding: 10px 12px;
}

%small-form-select {
	height: 42px;
	padding: 0 12px;
}

%sensei-clearfix {
	clear: both;
	content: '';
	display: table;
}

@mixin small-button() {
	&,
	&:active,
	&:visited {
		height: 40px;
		line-height: 20px;
		padding: 10px 18px;
	}
}

// Archive page
.post-type-archive-course {
	#primary {
		margin-bottom: 2.4rem;
		#main {
			> h1 {
				display: none;
			}
		}
	}
}

.post-type-archive-lesson {
	#primary {
		margin-bottom: 2.4rem;
		#main {
			.lesson {
				.entry-layout {
					.entry-header {
						.entry-image {
							display: none;
						}
					}
				}
			}
		}
	}
}

// Message Archive page
.post-type-archive-sensei_message {
	#primary {
		margin-bottom: 2.4rem;
		#main {
			.archive-header {
				display: none;
			}
			#main-sensei_message {
				.message-container {
					.sensei_message {
						background: white;
						padding: 12px;
						.message-content {
							h2 {
								font-size: 22px;
								color: nth( $blue, 1 );
								font-family: $font-family-sans-serif;
							}
							h2,
							.message-meta {
								margin-bottom: 0;
							}
							.entry {
								display: none;
							}
						}
					}
				}
			}
		}
	}
}

// Structure

article.page {
	.page-template-default:not(.has-sidebar).sensei & {
		width: 100% !important;
	}
}

.site-main {
	.archive:not(.has-sidebar).sensei & { width: 100% !important; }
}

.sensei {
	.fix {
		&:after { @extend %sensei-clearfix; }
	}

	article.post + article.post { margin-top: 4.25rem; }

	.post-entries { margin-top: 2.4rem; }

	.thumbnail {
		border: 0;
		border-radius: 0;
		padding: 0;
	}
}

.lesson-content {
	.entry {
		&:after { @extend %sensei-clearfix; }
	}
}

.sensei-share-your-grade {
	&.message { margin-top: 4.25rem; }
	&.buttons { padding-left: 0; }
	li {
		height: 20px;
		&:last-child {
			position: relative;
			top: -4px;
		}
	}
}

// All
#main {
	.course,
	.course-container {
		&:last-child {
			border-bottom: 0;
			margin-bottom: 0;
			padding-bottom: 0;
		}
	}
	.course-container {
		.course {
			padding: 0;
			margin: 0;
			margin-bottom: 30px;
			section.course-content {
				background: white;
				border: 1px solid #E9E9E9;
				padding: 10px;
				.entry {
					@include media('>tablet') {
						display: flex;
					}
					.course-thumbnail {
						@include media('>tablet') {
							margin-right: $lsx-gap;
							width: 30%;
							min-width: 225px;
						}
						@include media('>desktop-wide') {
							min-width: 378px;
						}
						flex-grow: 1;
						a {
							img {
								width: auto;
								height: 100%;
								object-fit: cover;
							}
						}
					}
					.course-body {
						min-width: 65%;
						flex-grow: 2;
						@include media('>desktop') {
							padding-right: 2.4em;
						}
						.course-title {
							display: block;
							font-family: $font-family-sans-serif;
						}
						.sensei-course-meta {
							margin: 10px 0px 0px 0;
							display: block;
							a {
								color: black;
							}
						}
						.course-author {
							display: none;
						}
						.sensei-course-meta {
							+ .sensei-course-participants,
							+ .course-details-info {
								margin-top: 10px;
							}
						}
						.course-price {
							color: #77A464;
							font-size: 22px;
							display: block;
							font-style: initial;
							font-weight: 700;
							margin: 5px 0;
						}
						.entry-actions {
							margin-bottom: 0;
						}
						.course-details-info {
							display: flex;
							flex-direction: column;
							.course-excerpt {
								order: 1;
							}
							.entry-actions {
								order: 2;
								&:nth-of-type(2) {
									margin-top: 2.4rem;
									display: flex;
									.button.view-results {
										margin-left: 0;
									}
								}
								@include media('>desktop-wide') {
									width: 50%;
									&:nth-of-type(1) {
										width: 25%;
									}
									&:nth-of-type(2) {
										margin-top: 0;
										display: initial;
										width: 49%;
										margin-left: 30%;
										position: relative;
										top: -4.8rem;
										margin-bottom: -4.8rem;
									}
								}
							}
							.meter {
								order: 3;
							}
						}
					}
				}
			}
		}
	}
	.course {
		.status {
			&.in-progress {
				background: #B7B6B6;
			}
		}
		.sensei-course-participants {
			margin-bottom: 10px;
		}
		.course-excerpt {
			margin-bottom: 10px;
			margin-top: 0;
		}
		.meter {
			border: 1px solid #DDDDDD;
			background: white;
			margin-bottom: 0;
			&.orange, &.red {
				>span {
					background: #ED3833;
				}
			}
			+ a {
				img {
					display: none;
				}
			}
		}
	}
}

// Single courses
.single-course,
.course-results {
	#primary {
		margin-bottom: 2.4rem;
		margin-top: 4.25rem;
		#main {
			.course {
				//@include media('<tablet') {
					display: flex;
					flex-direction: column;
				//}
				>p:first-child {
					@include media('>desktop') {
						width: 20%;
						float: right;
					}
					@include media('<tablet') {
						.button {
							width: 100%;
						}
					}
					display: flex;
					justify-content: flex-end;
				}

				> header:nth-of-type(1) {
					display: none;
				}
				.progress.course-completion-rate {
					font-size: 30px;
					font-family: $font-family-serif;
					@include media('<desktop') {
						order: -1;
					}
				}
				.sensei-course-participants {
					@include media('<desktop') {
						order: -1;
					}
				}
				.meter {
					margin-bottom: 2.4rem;
					@include media('<desktop') {
						order: -1;
					}
				}
				.course-meta {
					+ p {
						order: -1;
						@include media('>desktop') {
							align-self: flex-end;
							margin-bottom: -5.5rem;
						}
					}
				}
				.modules-title {
					margin-bottom: $lsx-gap;
				}
				.module, .entry+header+.course-lessons {
					header {
						background-color: white;
						h2 {
							color: #337ab7;
						}
					}
					.module-description {
						background: #E7E6E6;
						font-style: initial;
					}
					.module-lessons {
						header {
							background: #F2F2F2;
							* {
								font-family: $font-family-sans-serif;
							}
						}
						ul {
							li {
								a {
									background: #ECE9E9;
									&:hover {
										background: white;
									}
								}
							}
						}
					}
					+ header h2 {
						display: none;
					}
				}
				&.user-status-completed {
					.course-meta {
						.sensei-results-links {
							.view-results {
								@include lsx-button-scaffolding();
								@include lsx-button-colour();
								//@include small-button();
								margin-left: 2.4rem;
								&:hover {
									@extend %button-hover;
								}
							}
							@include media('<tablet') {
								display: flex;
								width: 100%;
								padding-top: 2.4rem;
								justify-content: space-between;
								a {
									width: 48%;
									margin-left: 0 !important;
									text-align: center;
								}
							}
						}
					}
				}
				.course-lessons {
					.lesson-meta {
						display: none;
					}
				}
			}
			#post-entries {
				display: none;
			}
		}
	}
	&:not(.logged-in) {
		#primary {
			#main {
				.course {
					.modules-title {
						display: none;
					}
				}
			}
		}
	}
}

.sensei-breadcrumb {
	background: #EBEAEA;
}

// Just Course Results
.course-results {
	#primary {
		#main {
			.course {
				.entry.fix {
					> a,
					> header {
						display: none;
					}
					.course-results-lessons {
						h3 {
							background: white;
							padding: 10px 20px;
							color: #337ab7;
							font-size: 18px;
							margin: 0;
						}
						h2 {
							background: #ECE9E9;
							margin: 0;
							padding: 10px 20px;
							display: flex;
							justify-content: space-between;
							border-bottom: 1px solid rgba(0,0,0,.05);
							a {
								color: rgba(0,0,0,.4);
							}
							a, .lesson-grade {
								font-size: 16px;
								text-decoration: none;
								font-family: $font-family-sans-serif;
							}
							.lesson-grade {
								font-weight: bold;
							}
						}
					}
				}
			}
		}
	}
}

// Single Lessons
.single-lesson {
	#primary {
		margin-top: 4.25rem;
		margin-bottom: 2.4rem;
		#main {
			.lesson {
				display: flex;
				flex-direction: column;
				* {
					order: 1;
				}
				.lesson-title {
					h1 {
						font-size: 30px;
						margin-bottom: 1rem;
					}
					.preview-label {
						margin-bottom: 1rem;
					}
					+ img {
						display: none;
					}
				}
				.sensei-message {
					order: -1;
					+ p {
						order: 2;
						@include media('>desktop') {
							align-self: flex-end;
							margin-bottom: -5rem;
						}
					}
				}
				.video {
					text-align: center;
					margin-bottom: 2.4rem;
				}
				footer {
					order: 2;
					width: 50%;
					display: flex;
					@include media('<tablet') {
						flex-direction: column;
						width: 100%;
					}
					.quiz-submit {
						background: nth($green, 1);
						box-shadow: 2px 2px 0 0 #446B0C;
						margin-top: 0;
						margin-left: 15px;
						@include media('<tablet') {
							margin-left: 0;
						}
						&:hover {
							background: #446B0C;
						}
					}
				}
				.sensei-share-your-grade {
					order: 3;
				}
			}
			#comments, #respond {
				display: none;
			}
		}
	}
}

// Single Quiz
.single-quiz {
	#primary {
		margin-top: 4.25rem;
		margin-bottom: 2.4rem;
		#main {
			.quiz {
				header {
					display: none;
				}
				.sensei-message {
					margin-top: 0;
				}
				.quiz-questions {
					form {
						display: flex;
						flex-direction: column;
						* {
							order: 1;
						}
						> p {
							@include media('>desktop') {
								align-self: flex-end;
								margin-bottom: 5rem;
							}
						}
						#sensei-quiz-list {
							padding: 0 0 0 1.6rem;
							order: -1;
							.answers {
								padding: 0;
								label {
									font-weight: 300;
								}
							}
							.question_media_display {
								dl>dt {
									font-weight: 300;
								}
							}
							li {
								.answer_message {
									&.user_wrong {
										background: #F2DEDE;
										span {
											font-size: 15px;
											padding: 10px;
											color: #A94442;
										}
									}
									&.user_right {
										background: #DFF0D8;
										span {
											font-size: 15px;
											padding: 10px;
											color: #3C763D;
										}
									}
								}
							}
						}
						> span {
							margin-bottom: 2.4rem;
							@include media('>desktop') {
								&:nth-of-type(1) {
									margin-bottom: -4rem;
									max-width: 150px;
								}
								&:nth-of-type(2) {
									margin-left: 180px;
									max-width: 180px;
									margin-bottom: -4rem;
								}
								&:nth-of-type(3) {
									margin-left: 320px;
									max-width: 320px;
									margin-bottom: 0;
								}
							}
							.quiz-submit {
								&.reset {
									@include lsx-button-scaffolding();
									@include lsx-button-colour();
									//@include small-button();
								}
							}
						}
					}
				}
				.sensei-share-your-grade {
					order: 3;
					&.message {
						margin-top: 8.4rem;
					}
				}
			}
			.post-entries {
				margin-top: 2.4rem;
			}
		}
	}
}

// Messages
.single-sensei_message {
	#primary {
		margin-top: 4.25rem;
		margin-bottom: 2.4rem;
		#main {
			.sensei_message {
				h1 {
					color: $text-color;
					font-size: 30px;
					margin-bottom: 0;
					a {
						color: $text-color;
					}
				}
			}
		}
	}
}

// Modules
.tax-module {
	#primary {
		margin-bottom: 2.4rem;
		margin-bottom: 2.4rem;
		#main {
			.module-container {
				h1 {
					display: none;
				}
			}
		}
	}
}

// Course Results
.course-results {
	#primary {
		margin-bottom: 2.4rem;
		#main {
			.sensei-pagination {
				display: none;
			}
		}
	}
}

// Buttons and fields
.sensei-ordering {
	select {
		@extend %bootstrap-form-control;
		@extend %lsx-form-field;
		@extend %small-form-select;
		font-size: 15px;
		height: 52px;
		min-width: 180px;
		border: 2px solid #DADDDF;
	}
}

.sensei {
	form, form.contact-teacher {
		.form-row {
			input.input-text,
			textarea {
				@extend %bootstrap-form-control;
				@extend %lsx-form-field;
			}

			input.input-text { @extend %small-form-field; }

			textarea { height: 80px; }
		}
	}
	form.contact-teacher {
		margin-bottom: 2.4rem;
	}
}

.course-container,
.course,
.lesson,
.quiz {
	a.button,
	a.comment-reply-link,
	#commentform #submit,
	.submit,
	input[type=submit],
	input.button,
	button.button {
		@include lsx-button-scaffolding();
		@include lsx-button-colour();
		//@include small-button();
		@include media('<tablet') {
			width: 100%;
			min-width: 100%;
		}
	}
	p {
		.button.send-message-button:not(.btn) {
			@include lsx-button-scaffolding();
			@include lsx-bordered-button();
			//@include small-button();
			// min-height: 48px;
			// line-height: 24px !important;
			// height: 48px;
			@include media('<tablet') {
				width: 100%;
				min-width: 100%;
			}
		}
	}

}

.sensei
.course-container,
.course,
.lesson,
.quiz,
.learner-info {
	p.sensei-message,
	div.sensei-message {
		line-height: 36px;
		overflow: hidden;

		a.next-lesson {
			@include lsx-button-scaffolding();
			@include lsx-button-colour();
			//@include small-button();
		}
	}
	h3#private_message {
		font-family: $font-family-sans-serif;
		color: $text-color;
		margin-bottom: 20px;
	}
	div.sensei-message {
		line-height: 24px;
		margin-top: 0;
		display: flex;
		align-items: center;
		justify-content: space-between;
		&.tick,
		&.alert,
		&.info {
			border: 1px solid transparent !important;
			@extend .alert;
			&:before {
				content: none;
			}
		}
		&.alert {
			@extend .alert-danger;
			border-color: #f5c6cb !important;
		}
		&.info {
			background-color: #e2e3e5;
			color: #383d41;
			border-color: #d6d8db !important;
		}
		&.tick {
			@extend .alert-success;
			border-color: #d6e9c6 !important;
		}

	}
}

.sensei-course-filters {
	margin-bottom: 2em;

	li {
		a {
			border: 0;
			font-size: 18px;
			padding: 12px 22px;
		}
	}
}

#sensei-user-courses {
	.my-messages-link-container {
		@include media('>desktop') {
			width: 20%;
			float: right;
			display: flex;
			justify-content: flex-end;
		}
		.my-messages-link {
			border: 2px solid #418AD0;
			border-radius: 3px;
			padding: 10px 18px;
			text-transform: uppercase;
			font-weight: 600;
			&:hover {
				color: white;
				background: #418AD0;
			}
		}
	}
	#user-course-status-toggle {
		width: 80%;
	}
	.course-container {
		.course-content {
			.course-author {
				display: none;
			}
		}
	}
}

#user-course-status-toggle {
	border-bottom: 0;
	margin-bottom: 2em;

	a {
		border: none;
		font-size: 18px;
		font-weight: normal;
		padding: 12px 22px;

		&.active { border-bottom: none; }
	}
}

.entry-actions {
	margin-bottom: 2.4rem;

	& > form {
		display: inline;
		margin-left: 1em;
		&:first-child { margin-left: 0; }
	}
}

.sensei-results-links {
	display: inline;
	overflow: hidden;

	.entry-actions & {
		margin-bottom: 0;
		a.view-results { float: none; }
	}
}

// Share

.fb_iframe_widget {
	span { vertical-align: top !important; }
}

// Login screen test

#my-courses {
	background: none;
	border: 0;
	color: inherit;
	font-size: inherit;
	padding: 0;
	#customer_login {
		max-width: 550px;
		margin-left: auto;
		margin-right: auto;
	}

	form#loginform, form.register {
		input[type="text"],
		input[type="password"],
		input[type="email"] {
			display: block;
				width: 100%;
				height: $input-height-base;
				padding: $padding-base-vertical $padding-base-horizontal;
				font-size: $font-size-base;
				line-height: $line-height-base;
				color: $input-color;
				background-color: $input-bg;
				background-image: none;
				border: 2px solid $input-border;
				border-radius: $input-border-radius;
				@include input-size('.input-lg', $input-height-large, $padding-large-vertical, $padding-large-horizontal, $font-size-large, $line-height-large, $input-border-radius-large);
				@include box-shadow(inset 0 1px 1px rgba(0,0,0,.075));
  				@include transition(border-color ease-in-out .15s, box-shadow ease-in-out .15s);
				@include form-control-focus;
				@include placeholder;
		}

		input[type="submit"] {
			@include lsx-button-scaffolding();
			@include lsx-button-colour();
			//@include small-button();

			& + a { margin-left: 15px; }
		}

		input[type="checkbox"] { margin-right: 10px; }
	}
}
